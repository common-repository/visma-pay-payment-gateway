!function(){"use strict";var e=window.wp.element,t=window.wp.i18n;const{registerPaymentMethod:a}=wc.wcBlocksRegistry,{getSetting:n}=wc.wcSettings,m=n("vismapay_data",{}),l=({embed:t,description:a,paymentDescription:n})=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)("p",null,a),t&&n&&(0,e.createElement)("p",null,n)),r=()=>(0,e.createElement)("div",{className:"woocommerce-error"},(0,e.createElement)("strong",null,(0,t.__)("No payment methods available for the currency: ","visma-pay-payment-gateway")+m.currency)),c=({index:t,method:a,selected:n,onSelect:m})=>{const l=`${a.group}-${t}`,r=a.selected_value;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{onClick:()=>m(l,r),className:n===l?"selected bank-button":"bank-button"},(0,e.createElement)("img",{alt:a.name,src:a.img_src})))},s=({groupName:t,methods:a,selected:n,onSelect:m})=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)("p",null,t),a.map(((t,a)=>(0,e.createElement)(c,{key:a,index:a,method:t,selected:n,onSelect:m}))),(0,e.createElement)("div",{style:{display:"block",clear:"both"}})),o=({methods:a,selected:n,onSelect:m})=>{const l=[{key:"banks",groupName:(0,t.__)("Internet banking","visma-pay-payment-gateway")},{key:"creditcards",groupName:(0,t.__)("Payment card","visma-pay-payment-gateway")},{key:"wallets",groupName:(0,t.__)("Wallet services","visma-pay-payment-gateway")},{key:"creditinvoices",groupName:(0,t.__)("Invoice or part payment","visma-pay-payment-gateway")}];return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{id:"visma-pay-bank-payments"},l.map((t=>{let l=a.filter((e=>e.group===t.key));return 0!==l.length&&(0,e.createElement)(s,{key:t.key,groupName:t.groupName,methods:l,selected:n,onSelect:m})}))))},i=t=>{const{eventRegistration:a,emitResponse:n,components:c}=t,{onPaymentSetup:s,onCheckoutFail:i}=a,{responseTypes:p}=n,{LoadingMask:y}=c,[d,u]=(0,e.useState)(null),[g,E]=(0,e.useState)(!1),[v,h]=(0,e.useState)(!1);return(0,e.useEffect)((()=>{const e=s((async()=>(h(!0),{type:p.SUCCESS,meta:{paymentMethodData:{payment_method:"visma_pay",visma_pay_selected_bank:g}}})));return()=>{e()}}),[p.SUCCESS,s,g]),(0,e.useEffect)((()=>{const e=i((()=>(h(!1),!0)));return()=>{e()}}),[i]),(0,e.createElement)(y,{isLoading:v,showSpinner:!0},(0,e.createElement)(l,{embed:m.embed,description:m.description,paymentDescription:m.paymentDescription}),m.embed&&m.paymentMethods&&m.paymentMethods.length>0?(0,e.createElement)(o,{methods:m.paymentMethods,selected:d,onSelect:(e,t)=>{u(e),E(t)}}):(0,e.createElement)(r,null))};a({name:"visma_pay",label:(0,e.createElement)((t=>{const{PaymentMethodLabel:a}=t.components;return(0,e.createElement)(a,{text:m.title})}),null),ariaLabel:m.title,content:(0,e.createElement)(i,null),edit:(0,e.createElement)(i,null),canMakePayment:()=>!0,paymentMethodId:"visma_pay",supports:{features:m.supports}})}();